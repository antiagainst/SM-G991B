/* SPDX-License-Identifier: GPL-2.0 */
/*
 * Samsung Exynos SoC series dsp driver
 *
 * Copyright (c) 2019 Samsung Electronics Co., Ltd.
 *              http://www.samsung.com/
 */

#ifndef __HW_N1_DSP_HW_N1_MEMORY_H__
#define __HW_N1_DSP_HW_N1_MEMORY_H__

#include "hardware/dsp-memory.h"

#define DSP_N1_MEMORY_MAX_SIZE	(SZ_16M)

#define DSP_N1_MASTER_FW_NAME	"dsp_master"

#define DSP_N1_FW_STACK_IOVA	(0x10000000)
#define DSP_N1_FW_STACK_SIZE	(SZ_1M)

#define DSP_N1_FW_EXTENSION	"bin"

#define DSP_N1_FW_NAME		"dsp"
#define DSP_N1_FW_IOVA		(DSP_N1_FW_STACK_IOVA + DSP_N1_FW_STACK_SIZE)
#define DSP_N1_FW_SIZE		(SZ_1M * 3)

#define DSP_N1_FW_LOG_IOVA	(DSP_N1_FW_STACK_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_FW_LOG_SIZE	(SZ_1M)

#define DSP_N1_IVP_PM_NAME	"dsp_ivp_pm"
#define DSP_N1_IVP_PM_IOVA	(DSP_N1_FW_LOG_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_IVP_PM_SIZE	(SZ_16M)

#define DSP_N1_IVP_DM_NAME	"dsp_ivp_dm"
#define DSP_N1_IVP_DM_IOVA	(DSP_N1_IVP_PM_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_IVP_DM_SIZE	(SZ_128K)

#define DSP_N1_IAC_PM_NAME	"dsp_iac_pm"
#define DSP_N1_IAC_PM_IOVA	(DSP_N1_IVP_DM_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_IAC_PM_SIZE	(SZ_32K)

#define DSP_N1_IAC_DM_NAME	"dsp_iac_dm"
#define DSP_N1_IAC_DM_IOVA	(DSP_N1_IAC_PM_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_IAC_DM_SIZE	(SZ_32K)

#define DSP_N1_MBOX_MEMORY_IOVA	(DSP_N1_IAC_DM_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_MBOX_MEMORY_SIZE	(SZ_8K)

#define DSP_N1_MBOX_POOL_IOVA	(DSP_N1_MBOX_MEMORY_IOVA + \
		DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_MBOX_POOL_SIZE	(SZ_128K)

#define DSP_N1_DL_OUT_IOVA	(DSP_N1_MBOX_POOL_IOVA + DSP_N1_MEMORY_MAX_SIZE)
#define DSP_N1_DL_OUT_SIZE	(SZ_1M)

#define DSP_N1_NPU_FW_NAME	"npu" // test fw
#define DSP_N1_NPU_FW_SIZE	(SZ_16K)

#define DSP_N1_HW_BASE_ADDR	(0x40000000)
#define DSP_N1_SM_BASE_ADDR	(0x50000)
#define DSP_N1_SM(n)		(DSP_N1_SM_BASE_ADDR + (n) * 4)

#define DSP_N1_SM_RESERVED_SIZE		(SZ_256)
#define DSP_N1_SM_RESERVED_BASE		(DSP_N1_SM(1984))
#define DSP_N1_SM_RESERVED(n)		(DSP_N1_SM_RESERVED_BASE + 0x4 * (n))

#define DSP_N1_SM_USERDEFINED_COUNT	(32)
#define DSP_N1_SM_USERDEFINED_SIZE	(SZ_4 * DSP_N1_SM_USERDEFINED_COUNT)
#define DSP_N1_SM_USERDEFINED_BASE	(DSP_N1_SM(0))
#define DSP_N1_SM_USERDEFINED(n)	(DSP_N1_SM_USERDEFINED_BASE + 0x4 * (n))

#define DSP_N1_SM_FW_INFO_COUNT		(32)
#define DSP_N1_SM_FW_INFO_SIZE		(SZ_4 * DSP_N1_SM_FW_INFO_COUNT)
#define DSP_N1_SM_FW_INFO_BASE		(DSP_N1_SM(DSP_N1_SM_USERDEFINED_COUNT))
#define DSP_N1_SM_FW_INFO(n)		(DSP_N1_SM_FW_INFO_BASE + 0x4 * (n))

enum dsp_n1_sm_used_count {
	/* 0x4005_1F00 */ DSP_N1_SM_TO_CC_MBOX		= 0,
	/* 0x4005_1F20 */ DSP_N1_SM_TO_HOST_MBOX	= 8,
	/* 0x4005_1F40 */ DSP_N1_SM_LOG_QUEUE		= 16,
	/* 0x4005_1F60 */ DSP_N1_SM_TO_CC_INT_STATUS	= 24,
	/* 0x4005_1F64 */ DSP_N1_SM_TO_HOST_INT_STATUS,
	/* 0x4005_1F68 */ DSP_N1_SM_FW_RESERVED_SIZE,
	/* 0x4005_1F6C */ DSP_N1_SM_IVP_PM_IOVA,
	/* 0x4005_1F70 */ DSP_N1_SM_RESERVED0,
	/* 0x4005_1F74 */ DSP_N1_SM_RESERVED1,
	/* 0x4005_1F78 */ DSP_N1_SM_IVP_PM_SIZE,
	/* 0x4005_1F7C */ DSP_N1_SM_IVP_DM_IOVA,
	/* 0x4005_1F80 */ DSP_N1_SM_IVP_DM_SIZE,
	/* 0x4005_1F84 */ DSP_N1_SM_IAC_PM_IOVA,
	/* 0x4005_1F88 */ DSP_N1_SM_IAC_PM_SIZE,
	/* 0x4005_1F8C */ DSP_N1_SM_IAC_DM_IOVA,
	/* 0x4005_1F90 */ DSP_N1_SM_IAC_DM_SIZE,
	/* 0x4005_1F94 */ DSP_N1_SM_MAILBOX_VERSION,
	/* 0x4005_1F98 */ DSP_N1_SM_MESSAGE_VERSION,
	/* 0x4005_1F9C */ DSP_N1_SM_FW_LOG_MEMORY_IOVA,
	/* 0x4005_1FA0 */ DSP_N1_SM_FW_LOG_MEMORY_SIZE,
	/* 0x4005_1FA4 */ DSP_N1_SM_TO_CC_MBOX_MEMORY_IOVA,
	/* 0x4005_1FA8 */ DSP_N1_SM_TO_CC_MBOX_MEMORY_SIZE,
	/* 0x4005_1FAC */ DSP_N1_SM_TO_CC_MBOX_POOL_IOVA,
	/* 0x4005_1FB0 */ DSP_N1_SM_TO_CC_MBOX_POOL_SIZE,
	/* 0x4005_1FB4 */ DSP_N1_SM_NPU_FW_IOVA,
	/* 0x4005_1FB8 */ DSP_N1_SM_KERNEL_MODE,
	/* 0x4005_1FBC */ DSP_N1_SM_DL_OUT_IOVA,
	/* 0x4005_1FC0 */ DSP_N1_SM_DL_OUT_SIZE,
	/* 0x4005_1FC4 */ DSP_N1_SM_DEBUG_LAYER_START,
	/* 0x4005_1FC8 */ DSP_N1_SM_DEBUG_LAYER_END,
	/* 0x4005_1FCC */ DSP_N1_SM_CHIPID_REV,
	/* 0x4005_1FD0 */ DSP_N1_SM_PRODUCT_ID,
	/* 0x4005_1FD4 */ DSP_N1_SM_DNC_FREQUENCY,
	/* 0x4005_1FD8 */ DSP_N1_SM_DSP_FREQUENCY,
	/* 0x4005_1FDC */ DSP_N1_SM_TEMP_1FDC,
	/* 0x4005_1FE0 */ DSP_N1_SM_TEMP_1FE0,
	/* 0x4005_1FE4 */ DSP_N1_SM_TEMP_1FE4,
	/* 0x4005_1FE8 */ DSP_N1_SM_TEMP_1FE8,
	/* 0x4005_1FEC */ DSP_N1_SM_TEMP_1FEC,
	/* 0x4005_1FF0 */ DSP_N1_SM_TEMP_1FF0,
	/* 0x4005_1FF4 */ DSP_N1_SM_TEMP_1FF4,
	/* 0x4005_1FF8 */ DSP_N1_SM_TEMP_1FF8,
	/* 0x4005_1FFC */ DSP_N1_SM_TEMP_1FFC,
	DSP_N1_SM_USED_COUNT
};

enum dsp_n1_priv_mem_id {
	DSP_N1_PRIV_MEM_FW_STACK,
	DSP_N1_PRIV_MEM_FW,
	DSP_N1_PRIV_MEM_FW_LOG,
	DSP_N1_PRIV_MEM_IVP_PM,
	DSP_N1_PRIV_MEM_IVP_DM,
	DSP_N1_PRIV_MEM_IAC_PM,
	DSP_N1_PRIV_MEM_IAC_DM,
	DSP_N1_PRIV_MEM_MBOX_MEMORY,
	DSP_N1_PRIV_MEM_MBOX_POOL,
	DSP_N1_PRIV_MEM_DL_OUT,
	DSP_N1_PRIV_MEM_COUNT,
};

int dsp_hw_n1_memory_init(void);

#endif
